const u=document.querySelector(".js-input"),h=document.querySelector(".js-btnSubmit"),v=document.getElementById("reset"),r=document.querySelector(".js-results"),d=document.querySelector(".js-favs"),s=document.querySelector(".js-popup"),f="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png",g="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let a=[],m=[];function L(e){let n=e.images.jpg.image_url;return n===f&&(n=g),`<li class="li">
        <img src="${n}" alt="film photo" />
        <h3>${e.title}</h3>
    </li>`}function p(e){r.innerHTML="";for(let n=0;n<e.length;n++)r.innerHTML+=L(e[n])}function S(e){e.preventDefault();const n=u.value;fetch(`https://api.jikan.moe/v4/anime?q=${n}`).then(t=>t.json()).then(t=>{a=t.data,p(a)}).catch(t=>{console.error("Error reaching data:",t)})}h.addEventListener("click",S);const j=e=>{e.preventDefault();const n=e.target.closest(".js-cancel");if(n){const t=n.previousElementSibling.textContent,l=i.findIndex(c=>c.title===t);l!==-1&&(i.splice(l,1),localStorage.setItem("favoriteFilms",JSON.stringify(i)),o(i))}};let i=JSON.parse(localStorage.getItem("favoriteFilms"))||[];o(i);function o(e){d.innerHTML="";for(let t=0;t<e.length;t++){const l=document.createElement("li");l.innerHTML=`
            <img src="${e[t].images.jpg.image_url===f?g:e[t].images.jpg.image_url}" alt="film photo" />
            <h3>${e[t].title}</h3>
            <i class="fa-regular fa-circle-xmark js-cancel"></i>
        `,d.appendChild(l),l.classList.add("favAside")}let n=document.querySelectorAll(".js-cancel");for(const t of n)t.addEventListener("click",j)}const x=e=>{e.preventDefault();const n=e.target.closest(".li");if(n){n.classList.add("favResult");const t=a.find(c=>c.title===n.querySelector("h3").textContent);i.findIndex(c=>c.title===t.title)===-1?(i.push(t),o(i),localStorage.setItem("favoriteFilms",JSON.stringify(i)),s.innerHTML="",s.classList.remove("header__message")):(s.innerHTML=`${t.title} ya estÃ¡ en la lista de favoritos.`,s.classList.add("header__message"),setTimeout(()=>{s.innerHTML="",s.classList.remove("header__message")},3e3))}};r.addEventListener("click",x);function y(e){e.preventDefault(),m=[],a=[],o(m),p(a),u.value="",localStorage.clear()}v.addEventListener("click",y);
//# sourceMappingURL=main.js.map
